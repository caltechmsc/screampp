
compilation of vmd on ubuntu

installing ubuntu packages:
-----------------------------
older info at
http://www.ks.uiuc.edu/Research/vmd/mailing_list/vmd-l/17060.html

sudo apt-get install tcsh
sudo apt-get install tcl tcl-dev tcl8.5-dev
sudo apt-get install tk tk-dev tk8.5-dev
sudo apt-get install fltk libfltk1.1 lbfltk1.1-dev
sudo apt-get install libnetcdf-dev
sudo apt-get install libglu1-mesa libglu1-mesa-dev
sudo apt-get install openbabel

not in ubuntu repository:
surf
stride
tachyon (0.99 or later required)
ACTC


plugins
-----------------------------
http://www.ks.uiuc.edu/Research/vmd/plugins/doxygen/compiling.html

in the plugin source directory:

make clean
export TCLINC=-I/usr/include/tcl8.5
export TCLLIB=-I/usr/lib
make LINUXAMD64 TCLINC=$TCLINC TCLLIB=$TCLLIB

export PLUGINDIR=/home/programs/vmd/vmd-1.9/plugins
make distrib

surf
------------------------------
the instructions in the vmd-1.9/lib/surf directory
do not work because makedepend does not work with the new ubuntu well
just copy the binary surf_LINUXAMD64 from the official vmd distribution to vmd-1.9/lib/surf

stride
-------------------------------
just use the binary from the official vmd distribution (/usr/lical/lib/vmd)

tachyon
--------------------------------
http://jedi.ks.uiuc.edu/~johns/raytracer/files/
in tachyon/unix
add -fPIC option to CFLAG in Makefile.arch:

make linux-64-thr-ogl

cp src/tachyon.h, util.h, hash.h, tachyon_dev.h   vmd-1.9/lib/tachyon/include
cp tachyon/compile/linux-64-thr-ogl/libtachyon.a vmd-1.9/lib/tachyon/lib_LINUXAMD64/libtachyon.a

copy the binary to vmd-1.9/lib/tachyon/tachyon_LINUXAMD64
(or can use hte stock vmd binary)

actc
------------------------------
http://www.plunk.org/~grantham/public/actc/
just download the package, extract
modify the compile options to:

CFLAGS=-fPIC -Wall -O6 -malign-loops=4 -malign-jumps=4 $(DEBUG)
(fPIC is important for later including this into the shared library)

cp tc.h to vmd1.9/lib/actc/include/tc.h
cp libactc.a to vmd1.9/lib/actc/lib_LINUXAMD64/libactc.a


vmd
-------------------------
http://www.ks.uiuc.edu/Research/vmd/doxygen/compiling.html

in the vmd source directory:
make linux.amd64.opengl

produced configure.options
LINUXAMD64 OPENGL FLTK TK ACTC CUDA IMD LIBSBALL XINERAMA XINPUT LIBTACHYON VRPN NETCDF TCL PYTHON PTHREADS NUMPY SILENT
modify to:
LINUXAMD64 OPENGL FLTK TK ACTC IMD NETCDF TCL PYTHON PTHREADS NUMPY SILENT SHARED
note: cannot use the same director ystructure to compile the shared library and the binary (not sure why, since almost all the files are the same)

modify configure file:

modify the configure script:
----------------------------
set the installation directory: $VASEKINSTALL/vmd

$stock_tcl_include_dir=$ENV{"TCL_INCLUDE_DIR"} || "/usr/include/tcl8.5";
$stock_tcl_library_dir=$ENV{"TCL_LIBRARY_DIR"} || "/usr/lib";

$stock_tk_include_dir=$ENV{"TK_INCLUDE_DIR"} || "/usr/include/tk8.5";
$stock_tk_library_dir=$ENV{"TK_LIBRARY_DIR"} || "/usr/lib";

$stock_python_include_dir=$ENV{"PYTHON_INCLUDE_DIR"} || "/usr/include/python2.7";
$stock_python_library_dir=$ENV{"PYTHON_LIBRARY_DIR"} || "/usr/lib";

$stock_numpy_include_dir=$ENV{"NUMPY_INCLUDE_DIR"} || "/usr/include/numpy";
$stock_numpy_library_dir=$ENV{"NUMPY_LIBRARY_DIR"} || "/usr/lib/pyshared/python2.7/numpy/core";

$python_libs        = "-lpython2.7 -lpthread";


I have also added the debugging flag.

and type ./configure

modify src/py_vmd.C
----------------------------
  char **vasek = argv; //vcvicek
//vcvicek  if (!VMDinitialize(&argc, (char ***) &argv)) {
  if (!VMDinitialize(&argc, &vasek)) { //vcvicek
    return;
  }


cd src
make veryclean
make
make install

finally
---------------------------------
copy the library vmd.so somewehre in PYTHONPATH
copy vmd/scripts/python to vasek/pyvmd
set the enviromental variables for vmd:

load custom script vmdEnvironment in vasek/pyvmd/VMD.py

note: has to run ipython with -pylab option, other wise window will not open


